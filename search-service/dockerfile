# ==============================================================
# Search Service (Stage 2) - Dockerfile
# ==============================================================

# Imagen base con Java 17 (JRE liviano)
FROM eclipse-temurin:17-jre

# Carpeta de trabajo dentro del contenedor
WORKDIR /app

# Copiamos el JAR compilado por Maven al contenedor
# (Asegúrate de que existe target/search-service-1.0.0.jar)
COPY target/search-service-1.0.0.jar app.jar

# Puerto interno donde escucha el servicio
EXPOSE 8082

# Variables de entorno para las rutas y el puerto
# Se pueden sobrescribir desde docker-compose
ENV PORT=8082
ENV INDEX_PATH=/data/inverted_index/inverted_index.json
ENV DB_PATH=/data/datamart/datamart.db

# Comando de ejecución del servicio
CMD ["java", "-jar", "app.jar"]
